# Pharmacy Management System

A comprehensive full-stack web application for managing pharmacy operations, built with Flask and SQLite.

## Features

### Customer Portal

- **Customer Login**: Secure login using Customer ID
- **View Prescriptions**: View all prescriptions with detailed medicine information
- **Add Prescriptions**: Submit new prescriptions with multiple items
- **Prescription Items**: View medicines, dosage, duration, and special instructions

### Admin Portal

- **Dashboard**: Overview of pharmacy operations with quick stats
- **Employee Management**: Complete CRUD operations for staff management
- **Product Management**: Manage medicine inventory with detailed information
- **Customer Management**: View and manage customer records with prescription history
- **Sales Reports**: View sales aggregated by products and suppliers
- **Comprehensive Reports**:
  - Current stock summary with availability status
  - Near-expiry items (within 30 days) with alerts
  - Top 10 selling medicines with performance metrics
  - Batch → Sale → Prescription traceability for regulatory compliance

## Technology Stack

- **Backend**: Flask (Python)
- **Database**: SQLite with SQLAlchemy ORM
- **Frontend**: HTML5, CSS3, JavaScript
- **UI Framework**: Bootstrap 5
- **Icons**: Font Awesome

## Database Schema

The system implements 10 interconnected tables:

1. **customers**: Customer information and contact details
2. **employees**: Staff details including roles and shifts
3. **suppliers**: Supplier information with regulatory licenses
4. **products**: Medicine catalog with pricing and prescription requirements
5. **batches**: Batch-level inventory tracking with expiry dates
6. **purchases**: Purchase transactions from suppliers
7. **sales**: Sales transactions to customers
8. **sale_items**: Individual items in each sale (weak entity)
9. **prescriptions**: Doctor prescriptions with validity
10. **prescription_items**: Medicines in each prescription (weak entity)

## Installation & Setup

### Prerequisites

- Python 3.8 or higher
- pip (Python package manager)

### Installation Steps

1. **Clone or download the repository**
   ```bash
   cd Pharmacy_management_system
   ```

2. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

3. **Seed the database with sample data**
   ```bash
   python seed_data.py
   ```

4. **Run the application**
   ```bash
   python app.py
   ```

5. **Access the application**
   - Open your browser and navigate to: `http://localhost:5000`

## Default Login Credentials

### Admin Access

- **Username**: admin
- **Password**: admin123

### Customer Access

- Use any Customer ID from 1 to 8 (generated by seed data)
- Example: Customer ID `1` for John Smith

## Project Structure

```
Pharmacy_management_system/
├── app.py                 # Main Flask application
├── seed_data.py          # Database seeding script
├── requirements.txt      # Python dependencies
├── models/
│   └── __init__.py       # SQLAlchemy database models
├── templates/            # HTML templates (Jinja2)
│   ├── base.html
│   ├── index.html
│   ├── customer_login.html
│   ├── customer_dashboard.html
│   ├── customer_prescriptions.html
│   ├── prescription_items.html
│   ├── add_prescription.html
│   ├── admin_login.html
│   ├── admin_dashboard.html
│   ├── admin_employees.html
│   ├── add_employee.html
│   ├── edit_employee.html
│   ├── admin_products.html
│   ├── add_product.html
│   ├── edit_product.html
│   ├── admin_customers.html
│   ├── add_customer.html
│   ├── admin_sales.html
│   └── admin_reports.html
├── static/
│   ├── css/
│   │   └── style.css     # Custom CSS styling
│   └── js/
│       └── main.js       # JavaScript functionality
└── pharmacy.db           # SQLite database (generated)
```

## Key Features Explained

### 1. Customer Features

#### Prescription Management

- Customers can view all their prescriptions
- Each prescription shows doctor details, date, and validity
- Detailed view of medicines with dosage and instructions
- Add new prescriptions with multiple medicine items

### 2. Admin Features

#### Employee Management

- Add, edit, and delete employees
- Track salary, work shifts, roles, and experience
- Comprehensive employee listing with all details

#### Product Management

- Manage medicine inventory
- Track brand names, generic names, forms, and strengths
- Set prescription requirements (OTC vs Prescription)
- Manage pricing (MRP and unit price)

#### Customer Management

- View all registered customers
- Display customer details and prescription counts
- Add new customers to the system

#### Sales Analytics

- View sales grouped by products
- Show associated suppliers for each product
- Display total quantities and sales amounts
- Real-time aggregation of sales data

#### Reports

- **Stock Summary**: Current inventory levels with low-stock alerts
- **Expiry Alerts**: Medicines expiring within 30 days with priority levels
- **Top Sellers**: Top 10 medicines with visual performance bars
- **Traceability**: Complete batch-to-sale-to-prescription tracking

### 3. Regulatory Compliance

The system ensures pharmaceutical regulatory compliance through:

- Batch number tracking from receipt to sale
- Prescription linkage to sales for controlled substances
- Doctor license number verification
- Expiry date monitoring and alerts
- Complete audit trail from supplier to customer

## UI/UX Features

### Design

- **Color Scheme**: Professional white-blue theme
- **Responsive**: Works on desktop, tablet, and mobile devices
- **Modern**: Clean, card-based layout with smooth animations

### Interactive Elements
- **Hover Effects**: Buttons turn blue with elevation on hover
- **Form Validation**: Real-time input validation with feedback
- **Modal Dialogs**: Confirmation dialogs for delete actions
- **Auto-dismiss Alerts**: Success/error messages auto-dismiss after 5 seconds
- **Loading States**: Visual feedback during form submissions

### Navigation
- **Breadcrumb Navigation**: Easy return to previous pages
- **Dashboard Cards**: Quick access to all major functions
- **Badges & Icons**: Visual indicators for status and categories
- **Search & Filter**: Table search and filtering capabilities

## Database Relationships

### Key Relationships
- Customers → Prescriptions (One-to-Many)
- Prescriptions → Prescription Items (One-to-Many)
- Products → Batches (One-to-Many)
- Suppliers → Batches (One-to-Many)
- Sales → Sale Items (One-to-Many)
- Batches → Sale Items (One-to-Many)
- Employees → Sales (One-to-Many)

### Regulatory Traceability Chain
```
Supplier → Batch → Product → Sale Item → Sale → Prescription → Customer
```

## Error Handling

The application includes comprehensive error handling:
- Database transaction rollback on errors
- User-friendly error messages
- Form validation with clear feedback
- Try-except blocks for all database operations
- Flash messages for user notifications

## Security Features

- Session-based authentication
- User type segregation (Customer vs Admin)
- Route protection (login required)
- SQL injection prevention (SQLAlchemy ORM)
- Password security (for future enhancement)

## Future Enhancements

Potential improvements for production deployment:
- User registration and email verification
- Password hashing for admin accounts
- Customer password authentication
- Advanced search and filtering
- Export reports to PDF/Excel
- Email notifications for expiry alerts
- Real-time inventory updates
- Barcode scanning integration
- Multi-pharmacy support
- Payment gateway integration

## Troubleshooting

### Database Issues
If you encounter database errors:
```bash
# Delete existing database
rm pharmacy.db

# Re-seed the database
python seed_data.py
```

### Port Already in Use
If port 5000 is already in use, modify `app.py`:
```python
app.run(debug=True, host='0.0.0.0', port=5001)
```

### Module Not Found
If you get import errors:
```bash
pip install -r requirements.txt --upgrade
```

## License

This project is developed for educational purposes.

## Support

For issues or questions, please check:
- Database connection in `app.py`
- Model relationships in `models/__init__.py`
- Route definitions in `app.py`
- Template rendering in respective HTML files

## Author

Pharmacy Management System
Version 1.0
2024

---

**Note**: This is a demonstration system. For production use, implement additional security measures, error handling, and testing.