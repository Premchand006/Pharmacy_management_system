{% extends "base.html" %}

{% block title %}My Prescriptions - Pharmacy Management System{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4 animate-fade-in">
    <h2 class="text-primary fw-bold">My Prescriptions</h2>
    <a href="{{ url_for('customer.customer_dashboard') }}" class="btn btn-outline-light">
        <i class="fas fa-arrow-left me-2"></i> Back to Dashboard
    </a>
</div>

{% if prescriptions %}
<div class="glass-card animate-fade-in">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="bg-transparent border-bottom border-secondary">
                    <tr>
                        <th class="ps-4">Prescription ID</th>
                        <th>Doctor License</th>
                        <th>Date</th>
                        <th>Validity</th>
                        <th>Hospital</th>
                        <th class="text-end pe-4">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for prescription in prescriptions %}
                    <tr>
                        <td class="ps-4"><span
                                class="badge bg-primary bg-opacity-20 text-primary border border-primary">#{{
                                prescription.pres_id }}</span></td>
                        <td>{{ prescription.doctor_license_no }}</td>
                        <td>{{ prescription.date.strftime('%Y-%m-%d') }}</td>
                        <td>
                            {% if prescription.validity >= date.today() %}
                            <span class="badge bg-success bg-opacity-20 text-success border border-success">
                                {{ prescription.validity.strftime('%Y-%m-%d') }}
                            </span>
                            {% else %}
                            <span class="badge bg-danger bg-opacity-20 text-danger border border-danger">
                                {{ prescription.validity.strftime('%Y-%m-%d') }} (Expired)
                            </span>
                            {% endif %}
                        </td>
                        <td>{{ prescription.hospital_name }}</td>
                        <td class="text-end pe-4">
                            <a href="{{ url_for('customer.prescription_items', prescription_id=prescription.pres_id) }}"
                                class="btn btn-sm btn-info text-white">
                                <i class="fas fa-eye me-1"></i> View Items
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% else %}
<div class="text-center py-5 animate-fade-in">
    <div class="glass-card p-5 d-inline-block">
        <div class="mb-4">
            <div class="icon-circle bg-secondary bg-opacity-20 text-secondary mx-auto mb-3"
                style="width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-prescription-bottle fa-3x"></i>
            </div>
        </div>
        <h4 class="text-gray-300 mb-3">No Prescriptions Found</h4>
        <p class="text-muted mb-4">You don't have any prescriptions yet.</p>
        <a href="{{ url_for('customer.add_prescription') }}" class="btn btn-primary">
            <i class="fas fa-plus me-2"></i> Add Your First Prescription
        </a>
    </div>
</div>
{% endif %}
{% endblock %}